<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE beans PUBLIC '-//SPRING//DTD BEAN//EN' 'http://www.springframework.org/dtd/spring-beans.dtd'>
<beans>

    <bean id="orders.import-scripts.add-case-types-to-site" parent="orders.import-scripts">
        <property name="name" value="add-case-types-to-site"/>
        <property name="description" value="add-case-types-to-site"/>
        <property name="dependsOn">
            <list>
                <ref bean="orders.siteBootstrap"/>
                <ref bean="orders.categoryBootstrap"/>
                <ref bean="orders.documentFolders"/>
                <ref bean="orders.module-component.journals-internal"/>
            </list>
        </property>
        <property name="bootstrapScript" value="alfresco/module/idocs-repo/bootstrap/scripts/set-attributes.js"/>
        <property name="args">
            <map>
                <entry key="nodes">
                    <list>
                        <!-- internal -->
                        <map>
                            <entry key="node" value="/app:company_home/st:sites/cm:orders/cm:documentLibrary/cm:documents/cm:internals" />
                            <entry key="attributes">
                                <map>
                                    <entry key="tk:relatesToType" value="workspace://SpacesStore/orders-cat-doctype-internal" />
                                </map>
                            </entry>
                        </map>
                        <map>
                            <entry key="node" value="/cm:IDocsRoot/journal:journalMetaRoot/cm:journals/journal:orders-internal" />
                            <entry key="attributes">
                                <map>
                                    <entry key="tk:relatesToType" value="workspace://SpacesStore/orders-cat-doctype-internal" />
                                </map>
                            </entry>
                        </map>
                        <!-- orders site -->
                        <map>
                            <entry key="node" value="/app:company_home/st:sites/cm:orders"/>
                            <entry key="attributes">
                                <map>
                                    <entry key="tk:siteDocumentTypes">
                                        <list>
                                            <value>workspace://SpacesStore/orders-cat-doctype-internal</value>
                                        </list>
                                    </entry>
                                </map>
                            </entry>
                        </map>
                    </list>
                </entry>
            </map>
        </property>
    </bean>

    <bean id="orders.module-components.internal-confirm-routes" parent="orders.import-scripts">
        <property name="name" value="orders-confirm-routes" />
        <property name="description" value="Base Orders Case Confirmation Route" />
        <property name="bootstrapScript" value="alfresco/module/orders-repo/bootstrap/scripts/orders-routes.js"/>
    </bean>

    <bean id="orders.patch.move-orders-ent-to-community" parent="ru.citeck.ecos.patch.MoveComponentsPatch">
        <property name="id" value="orders.patch.move-orders-ent-to-community" />
        <property name="description" value="orders.patch.move-orders-ent-to-community.description" />
        <property name="fromModuleId" value="orders-ent-repo" />
        <property name="toModuleId" value="orders-repo" />
        <property name="transitions">
            <list>
                <props>
                    <prop key="from">orders-ent.module-components.internal-confirm-routes</prop>
                    <prop key="to">orders.module-components.internal-confirm-routes</prop>
                </props>
            </list>
        </property>
    </bean>

</beans>