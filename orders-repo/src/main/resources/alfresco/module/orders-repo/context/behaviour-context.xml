<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE beans PUBLIC '-//SPRING/DTD BEAN//EN' 'http://www.springframework.org/dtd/spring-beans.dtd'>
<beans>

    <bean id="orders.internal.autoNameBehaviour" parent="AutoNameBehaviour">
        <property name="className" value="orders:internal" />
        <property name="nameTemplate">
            <value><![CDATA[<#if node.assocs['icase:caseStatusAssoc']?? && node.assocs['icase:caseStatusAssoc']?size &gt; 0 && node.assocs['icase:caseStatusAssoc'][0].properties["cm:name"]?? && node.assocs['icase:caseStatusAssoc'][0].properties["cm:name"] == 'active'>Документ № #{'$'}{node.properties['idocs:registrationNumber']!'б/н'}<#else>Документ № #{'$'}{node.properties['orders:projectNumber']!'б/н'}</#if>]]></value>
        </property>
    </bean>

    <bean id="orders.internal.titleGenerationBehaviour" parent="TitleGenerationBehaviour">
        <property name="className" value="orders:internal" />
        <property name="titleTemplate">
            <value><![CDATA[<#if node.assocs['icase:caseStatusAssoc']?? && node.assocs['icase:caseStatusAssoc']?size &gt; 0 && node.assocs['icase:caseStatusAssoc'][0].properties["cm:name"]?? && node.assocs['icase:caseStatusAssoc'][0].properties["cm:name"] == 'active'>Документ № #{'$'}{node.properties['idocs:registrationNumber']!'б/н'}<#else>Документ № #{'$'}{node.properties['orders:projectNumber']!'б/н'}</#if>]]></value>
        </property>
    </bean>

    <bean id="orders.subjects.NamingBehaviour" parent="AutoNameBehaviour">
        <property name="className" value="orders:subject" />
        <property name="nameTemplate" value="#{'$'}{node.properties['idocs:fileIndex']!} (#{'$'}{node.properties['idocs:fileName']!})" />
    </bean>
    
    <bean id="orders.internal.projectNumber.EnumerationBehaviour" parent="EnumerationBehaviour" depends-on="orders.dictionaryBootstrap">
        <property name="className" value="orders:internal" />
        <property name="numberField" value="orders:projectNumber" />
        <property name="templateName" value="projectNumber-template" />
    </bean>

    <bean id="orders.CountChildAssociations" parent="CountChildAssociations">
        <property name="className" value="orders:internal" />
        <property name="propertyForCountChild" value="orders:appendixNumber" />
        <property name="childAssocType" value="dms:supplementaryFiles" />
    </bean>

    <bean id="orders.internal.projectNumber" parent="fillUtilityNumberField">
        <property name="className" value="orders:internal" />
        <property name="stringField" value="orders:projectNumber" />
        <property name="numericField" value="orders:projectNumberSort" />
    </bean>

</beans>