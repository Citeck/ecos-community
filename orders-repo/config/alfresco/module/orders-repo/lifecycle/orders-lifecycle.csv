fromState,event,toState,transitionCondition,action
start,"{""eventType"":""automaticTransition""}",created,,"document.properties['idocs:documentStatus'] = 'project'; document.save();"
created,"{""eventType"":""onStartProcess"",""workflowId"":""activiti$confirm"", ""actionName"":""confirm""}",confirming,,"document.properties['idocs:documentStatus'] = 'onApproval'; document.save();"
confirming,"{""eventType"":""onEndProcess"",""workflowId"":""activiti$confirm""}",declined,process.wfcf_confirmed == false,document.properties['idocs:documentStatus'] = 'canceled'; document.save();
confirming,"{""eventType"":""onEndProcess"",""workflowId"":""activiti$confirm""}",confirmed,process.wfcf_confirmed == true,document.properties['orders:confirmComment'] = process.cwf_lastcomment; document.properties['idocs:documentStatus'] = 'approved'; document.save();
confirmed,"{""eventType"":""automaticTransition""}",on-control,,"startWorkflow (""activiti$normative-control"", {""wfnc_controller"": groups.getGroup('clerks').getGroupNodeRef(),""bpm:workflowDescription"": ""Рассмотреть и проверить проект документа"", ""cwf:lastcomment"": document.properties['orders:confirmComment']}); document.properties['idocs:documentStatus'] = 'onNormcontrol'; document.save();"
on-control,"{""eventType"":""onEndProcess"",""workflowId"":""activiti$normative-control""}",on-correction,"process.wfnc_controlOutcome == 'Reject'","startWorkflow (""activiti$correction"", {""wfcr_corrector"": document.assocs['idocs:initiator'][0],""bpm:workflowDescription"": ""Отредактировать и доработать проект документа""});if(!document.hasAspect(""idocs:hasFailureCause"")) {document.addAspect(""idocs:hasFailureCause"");}document.properties[""idocs:failureCause""] = document.properties['orders:confirmComment'];document.save();"
on-control,"{""eventType"":""onEndProcess"",""workflowId"":""activiti$normative-control""}",controlled,process.wfnc_controlOutcome == 'Approve',"document.properties['idocs:documentStatus'] = 'approved'; document.save();"
on-control,"{""eventType"":""onEndProcess"",""workflowId"":""activiti$normative-control""}",controlled,process.wfnc_controlOutcome == 'ApproveWhithComment',"document.properties['idocs:documentStatus'] = 'approvedWithComment'; document.save();"
on-control,"{""eventType"":""onEndProcess"",""workflowId"":""activiti$normative-control""}",confirming,"process.wfnc_controlOutcome == 'ToApprove'","startWorkflow (""activiti$confirm"", {""wfcf_confirmers"": process.wfcf_confirmers,""wfcf_precedence"": process.wfcf_precedence,""bpm:workflowDescription"": ""Дополнительное согласование проекта документа""});document.properties['idocs:documentStatus'] = 'onApproval'; document.save();"
controlled,"{""eventType"":""automaticTransition""}",on-signing,,"startWorkflow (""activiti$sign"", {""wfsgn_signerGroup"": groups.getGroup('clerks').getGroupNodeRef(),""bpm:workflowDescription"": ""Подписать документ в бумажном виде"" , ""wfsgn_signer"":  person}); document.properties['idocs:documentStatus'] = 'onSign'; document.save();"
on-signing,"{""eventType"":""onEndProcess"",""workflowId"":""activiti$sign""}",declined,process.outcome == 'Declined',document.properties['idocs:documentStatus'] = 'canceled'; document.save();
on-signing,"{""eventType"":""onEndProcess"",""workflowId"":""activiti$sign""}",signed,process.outcome == 'Signed',document.properties['idocs:documentStatus'] = 'signed'; document.properties['orders:signComment'] = process.cwf_lastcomment; document.save();
signed,"{""eventType"":""automaticTransition""}",on-registration,,"startWorkflow (""activiti$registration"", {""wfrg_registrator"": groups.getGroup('registrars').getGroupNodeRef(),""bpm:workflowDescription"": ""Зарегистрировать документ"",""cwf:lastcomment"": document.properties['orders:signComment'], ""wfrg_autoNumberTemplate"": ""internal-regNumber-template"" }); document.properties['idocs:documentStatus'] = 'onRegistration'; document.save();"
on-registration,"{""eventType"":""onEndProcess"",""workflowId"":""activiti$registration""}",declined,process.outcome == 'Declined',
on-registration,"{""eventType"":""onEndProcess"",""workflowId"":""activiti$registration""}",registred,process.outcome == 'Registered',document.properties['idocs:documentStatus'] = 'registered'; document.save();
on-correction,"{""eventType"":""onEndProcess"",""workflowId"":""activiti$correction""}",confirmed,process.outcome == 'ForAll',
