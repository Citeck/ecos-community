<?xml version='1.0' encoding='UTF-8'?>
<component>
    <scope>page</scope>
    <source-id>card-details</source-id>
    <region-id>products-and-services</region-id>
    <url>/citeck/components/document-children</url>
    <properties>
        <nodeRef>{nodeRef}</nodeRef>
        <destination>{nodeRef}</destination>
        <header>header.products-and-services</header>
        <contentType>pas:productOrServiceCopied</contentType>
        <assocType>pas:containsProductOrService</assocType>
        <childrenUrl>Alfresco.constants.PROXY_URI + "citeck/assocs?nodeRef={nodeRef}&amp;assocTypes=pas:containsProductOrService&amp;addAssocs=false"
        </childrenUrl>
        <columns>
            [
                <!--{key: 'attributes["cm:name"]', label: Alfresco.util.message("stages.table.header.name")},-->
                {key: 'attributes["cm:name"]', label: 'Название'},
                {key: 'attributes["cm:title"]', label: 'Заголовок'},
                {key: 'attributes["pas:type"]', label: 'Тип'},
                {key: 'attributes["pas:pricePerUnit"]', label: 'Цена'},
                {key: 'attributes["pas:quantity"]', label: 'Количество'},
                {key: 'attributes["pas:total"]', label: 'Всего'},
                {key: 'attributes["pas:elementUnit"]', label: 'Ед. измерения'},
                {key: 'actions', label: 'Действия', formatter: Citeck.format.actions('products-and-services', 'nodeRef')}
            ]
        </columns>
        <responseSchema>
            {resultsList: 'targets', fields: [
                {key: 'attributes["cm:name"]'},
                {key: 'attributes["cm:title"]'},
                {key: 'attributes["pas:type"]'},
                {key: 'attributes["pas:pricePerUnit"]'},
                {key: 'attributes["pas:quantity"]'},
                {key: 'attributes["pas:total"]'},
                {key: 'attributes["pas:elementUnit"]'},
                {key: 'nodeRef'}
            ]}
        </responseSchema>
        <buttonsInHeader>onPanelButtonAssocsAdd</buttonsInHeader>
        <destination>{nodeRef}</destination>
        <assocType>pas:containsProductOrService</assocType>
        <addAssocScript>/citeck/add-pas-assocs</addAssocScript>
        <searchURL>Alfresco.constants.PROXY_URI + "citeck/search/simple?type=pas:productOrService&amp;property=cm:title&amp;properties=cm:title&amp;replaceColon=_&amp;value=[[query]]"</searchURL>
        <searchURLresults>nodes</searchURLresults>
        <itemTitle>[[title]]</itemTitle>
        <twisterKey>stages</twisterKey>
    </properties>
</component>
