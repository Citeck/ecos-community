<?xml version='1.0' encoding='UTF-8'?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <!--<bean id="JournalsChildAssociationsRegistrar" class="ru.citeck.ecos.form.ChildAssociationsRegistrar"
            depends-on="journals.dictionaryBootstrap" init-method="init">
        <property name="childAssociationsFormFilters" >
            <list>
                <ref bean="ChildAssociationsFilesCreateFilter" />
                <ref bean="ChildAssociationsFilesEditFilter" />
            </list>
        </property>
        <property name="associations">
            <list>
                <value>journal:createVariants</value>
                <value>journal:searchCriteria</value>
            </list>
        </property>
    </bean>-->

    <bean id="journals.groupActionService" class="ru.citeck.ecos.journals.action.group.GroupActionServiceImpl">
    </bean>

    <bean id="journals.filterActionService" class="ru.citeck.ecos.journals.action.filter.FilterActionServiceImpl">
    </bean>

    <bean id="journals.groupActionServiceJS" class="ru.citeck.ecos.journals.action.group.GroupActionServiceJS" parent="baseJavaScriptExtension">
        <property name="extensionName" value="groupActionService" />
        <property name="groupActionService" ref="journals.groupActionService" />
        <property name="serviceRegistry" ref="ServiceRegistry" />
    </bean>

    <bean id="journals.groupActionEvaluator" class="ru.citeck.ecos.journals.action.group.GroupActionExecutor"
                                             abstract="true" init-method="init">
        <property name="groupActionService" ref="journals.groupActionService" />
        <property name="namespaceService" ref="namespaceService" />
        <property name="workflowService" ref="WorkflowService" />
        <property name="nodeService" ref="nodeService" />
    </bean>

    <bean id="journals.recordsDAO" class="ru.citeck.ecos.journals.records.JournalRecordsDAO">
        <property name="recordsBaseQuery">
            <value>
                query getJournalRecords($datasource: String, $query: String, $language: String, $pageInfo: InputJournalGqlPageInfoInput) {
                    journalRecords(datasource: $datasource, query: $query, language: $language, pageInfo: $pageInfo) {
                        records {...recordsFields}
                        totalCount
                        pageInfo {
                            hasNextPage
                            skipCount
                            maxItems
                        }
                    }
                }
            </value>
        </property>
        <property name="recordsListPath" value="journalRecords.records" />
        <property name="totalCountPath" value="journalRecords.totalCount" />
        <property name="hasNextPagePath" value="journalRecords.pageInfo.hasNextPage" />
    </bean>

</beans>
