<?xml version="1.0" encoding="UTF-8"?>
<invariants xmlns="http://www.citeck.ru/ecos/invariants/1.0">

    <imports>
        <import uri="http://www.alfresco.org/model/dictionary/1.0" prefix="d" />
        <import uri="http://www.alfresco.org/model/content/1.0" prefix="cm" />

        <import uri="http://www.citeck.ru/model/products-and-services/1.0" prefix="pas" />
    </imports>

    <type name="pas:pasEntityCopied">
        <property name="pas:quantity">
            <invariant on="valid" language="javascript" description="Число должно быть положительным">value > 0</invariant>
            <invariant on="mandatory" language="explicit" description="Введено некорректное значение">true</invariant>
            <invariant on="default" language="javascript">1</invariant>
        </property>
        <property name="pas:total">
            <invariant on="valid" language="javascript" description="Число должно быть неотрицательным">value >= 0</invariant>
            <invariant on="mandatory" language="explicit" description="Введено некорректное значение">true</invariant>
            <invariant on="value" language="javascript">Math.round(node.properties["pas:pricePerUnit"] * node.properties["pas:quantity"] * 10000) / 10000</invariant>
        </property>
    </type>
    <type name="pas:pasEntity">
        <property name="pas:pricePerUnit">
            <invariant on="valid" language="javascript" description="Число должно быть неотрицательным">value >= 0</invariant>
            <invariant on="mandatory" language="explicit" description="Введено некорректное значение">true</invariant>
            <invariant on="default" language="javascript">0</invariant>
        </property>
        <association name="pas:currency">
            <invariant on="mandatory" language="explicit">true</invariant>
        </association>
    </type>

</invariants>