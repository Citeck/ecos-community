<?xml version="1.0" encoding="UTF-8"?>
<views xmlns="http://www.citeck.ru/ecos/views/1.0">
    <imports>
        <import uri="http://www.alfresco.org/model/dictionary/1.0" prefix="d" />
        <import uri="http://www.alfresco.org/model/content/1.0" prefix="cm" />
        <import uri="http://www.citeck.ru/model/deputy/1.0" prefix="deputy" />
        <import uri="http://www.citeck.ru/model/orgstruct/1.0" prefix="org" />
    </imports>

    <view class="cm:person">
        <field prop="cm:userName">
            <invariant on="protected" language="explicit">true</invariant>
        </field>
        <field prop="cm:firstName" />
        <field prop="cm:lastName" />
        <field prop="cm:email">
            <invariant on="valid" language="javascript">
                /.+\@.+\..+/.test(value)
            </invariant>
        </field>
        <view class="deputy:availability">
            <field prop="deputy:available">
                <invariant on="mandatory" language="explicit">true</invariant>
                <invariant on="default" language="explicit">true</invariant>
            </field>
        </view>
    </view>

    <views class="cm:person" mode="view">
        <views class="deputy:availability">
            <fields prop="deputy:available">
                <regions name="input" template="view">
                    <param name="emptyLabel">label.yes</param>
                </regions>
            </fields>
        </views>
    </views>
</views>