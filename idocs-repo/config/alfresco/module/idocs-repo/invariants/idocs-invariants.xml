<?xml version="1.0" encoding="UTF-8"?>
<invariants xmlns="http://www.citeck.ru/ecos/invariants/1.0">

    <imports>
        <import uri="http://www.alfresco.org/model/dictionary/1.0" prefix="d" />
        <import uri="http://www.alfresco.org/model/content/1.0" prefix="cm" />
        <import uri="http://www.citeck.ru/model/content/idocs/1.0" prefix="idocs" />
    </imports>
    
    <associations type="idocs:legalEntity">
        <invariant on="value-title" language="javascript">value.properties["idocs:shortOrganizationName"] || value.properties["idocs:fullOrganizationName"]</invariant>
    </associations>

    <aspect name="idocs:pagesInfo">
        <property name="idocs:pagesNumber">
            <invariant on="valid" language="javascript" description="Количество листов не может быть меньше нуля.">+value >= 0 ? true : false</invariant>
        </property>
        <property name="idocs:appendixPagesNumber">
            <invariant on="valid" language="javascript" description="Количество листов приложений не может быть меньше нуля.">+value >= 0 ? true : false</invariant>
        </property>
    </aspect>

    <type name="idocs:bankAccount">
        <association name="idocs:legalEntity">
            <invariant on="mandatory" language="explicit">true</invariant>
        </association>
        <property name="idocs:bankTitleEng">
            <invariant on="relevant" language="javascript">node.properties["idocs:currencyEnabled"]</invariant>
            <invariant on="mandatory" language="explicit">true</invariant>
        </property>
        <property name="idocs:swift">
            <invariant on="relevant" language="javascript">node.properties["idocs:currencyEnabled"]</invariant>
            <invariant on="mandatory" language="explicit">true</invariant>
        </property>
        <property name="idocs:corresponentAccountNumber">
            <invariant on="mandatory" language="explicit">true</invariant>
        </property>
    </type>

</invariants>