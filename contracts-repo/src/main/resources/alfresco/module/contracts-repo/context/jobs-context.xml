<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE beans PUBLIC '-//SPRING//DTD BEAN//EN' 'http://www.springframework.org/dtd/spring-beans.dtd'>

<beans>

    <bean id="contracts.updateInactivityPeriodExecutor" class="ru.citeck.ecos.jobs.UpdateInactivityPeriodExecutor">
        <property name="nodeService"   ref="NodeService"/>
        <property name="searchService" ref="SearchService"/>
    </bean>

    <bean id="contracts.updateInactivityPeriodTrigger" class="org.alfresco.util.CronTriggerBean">
        <property name="jobDetail">
            <bean class="org.springframework.scheduling.quartz.JobDetailBean">
                <property name="jobClass" value="ru.citeck.ecos.jobs.UpdateInactivityPeriodJob"/>
                <property name="jobDataAsMap">
                    <map>
                        <entry key="jobExecutor"    value-ref="contracts.updateInactivityPeriodExecutor"/>
                        <entry key="jobLockService" value-ref="jobLockService"/>
                    </map>
                </property>
            </bean>
        </property>
        <property name="enabled"        value="${job.update.inactivity.period.enabled}"/>
        <property name="scheduler"      ref="schedulerFactory"/>
        <property name="cronExpression" value="${job.update.inactivity.period.cronExpression}"/>
    </bean>
    
</beans>