fromState,event,toState,transitionCondition,action
start,"{""eventType"":""automaticTransition""}",project,,document.properties['idocs:documentStatus'] = 'draft'; document.save();
project,"{""eventType"":""onStartProcess"",""workflowId"":""activiti$confirm"",""actionName"":""confirm""}",confirmation,document.properties.creator == person.properties.userName,document.properties['idocs:documentStatus'] = 'onApproval'; document.save(); process.wfcf_skipCorrectTask = true; process.wfcf_confirmersPermission = 'Collaborator'
confirmation,"{""eventType"":""onEndProcess"",""workflowId"":""activiti$confirm""}",forPayment,process.wfcf_confirmed == true,document.properties['idocs:documentStatus'] = 'approved'; document.save();
forPayment,"{""eventType"":""automaticTransition""}",payment,document.properties['payments:paymentFor']=='performer',"var accountant = groups.getGroup(""company_chief_accountant"");startWorkflow(""activiti$simple-payment"", {""wfsp:paymentAgent"": accountant, ""bpm:workflowDescription"":""Оплатить счет ""+document.name, ""bpm:workflowDueDate"": document.properties[""payments:paymentDate""], ""cwf:setInitiator"": true});"
payment,"{""eventType"":""onEndProcess"",""workflowId"":""activiti$simple-payment""}",paid,process.outcome=='Paid',"document.properties['idocs:documentStatus'] = 'paid'; document.save();"
payment,"{""eventType"":""onEndProcess"",""workflowId"":""activiti$simple-payment""}",forPayment,process.outcome=='Extend',
forPayment,"{""eventType"":""automaticTransition""}",pay,document.properties['payments:paymentFor']=='client',document.properties['idocs:documentStatus'] = 'forPayment'; "document.save(); var affirm = groups.getGroup(""payment-affirm""); startWorkflow(""activiti$simple-affirm"", {""cwf:sendNotification"": true, ""wfsa:affirmAgent"": affirm, ""bpm:workflowDescription"":""Подтвердить оплату"", ""cwf:setInitiator"": true});"
pay,"{""eventType"":""onEndProcess"",""workflowId"":""activiti$simple-affirm""}",paid,process.outcome == 'Affirmed',"document.properties['idocs:documentStatus'] = 'paid'; document.save();"
pay,"{""eventType"":""onEndProcess"",""workflowId"":""activiti$simple-affirm""}",cancelled,process.outcome == 'Declined',document.properties['idocs:documentStatus'] = 'canceled'; document.save();