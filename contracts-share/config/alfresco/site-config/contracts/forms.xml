<alfresco-config>

	<config evaluator="node-type" condition="contracts:agreement">
		<forms>
			<form>
				<edit-form template="/ru/citeck/components/form/contracts/agreement.ftl" />
				<field-visibility>
					<show id="contracts:agreementLegalEntity" />
					<show id="contracts:agreementSubject" />
					<show id="idocs:documentStatus"  />
					<!--show id="idocs:registrationDate" for-mode="view"/>
					<show id="idocs:registrationNumber" for-mode="view" /-->
					<show id="contracts:contractor" />
					<show id="contracts:agreementNumber" />
					<show id="contracts:agreementCurrency" />
					<show id="contracts:agreementDate" />
					<show id="contracts:agreementAmount" />
					<show id="contracts:duration" />
					<show id="contracts:VAT" />
					<show id="contracts:contractWith" />
					<show id="idocs:pagesNumber" />
					<show id="idocs:signatory" />
					<show id="idocs:appendixPagesNumber" />
					<show id="idocs:performer" />
					<show id="idocs:summary" />
					<!--show id="contracts:documentNomination" /-->
					<show id="idocs:note" />
					<show id="tk:kind"/>
					<show id="payments:payments" for-mode="edit"/>
					<show id="idocs:signedVersion" for-mode="view"/>
					<show id="idocs:dateConfirmDueDate" force="true"/>
					<show id="idocs:hasContractorApproval" force="true"/>
					<!--show id="idocs:confirmers" force="true"/-->
					<!--show id="idocs:priorityConfirm" force="true"/-->
				</field-visibility>
				<appearance>
					<set id="" template="/ru/citeck/components/form/2-column-set.ftl" />
					<set id="payments" />
					<field id="contracts:agreementLegalEntity" mandatory="true">
						<control
							template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="flatButtonMode">true
							</control-param>
							<control-param name="searchWholeRepo">true
							</control-param>
							<control-param name="showTargetLink">true
							</control-param>
						</control>
					</field>
					<field id="contracts:contractor" mandatory="true">
						<control
							template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="flatButtonMode">true
							</control-param>
							<control-param name="searchWholeRepo">true
							</control-param>
							<control-param name="journalFolderId">
								idocs.journal.idocs-contractor.title
							</control-param>
							<control-param name="showTargetLink">true
							</control-param>
						</control>
					</field>
					<field id="contracts:agreementSubject" >
						<control
							template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="flatButtonMode">true
							</control-param>
							<control-param name="searchWholeRepo">true
							</control-param>
							<control-param name="showTargetLink">true
							</control-param>
						</control>
					</field>
					<field id="idocs:signatory">
						<control
								template="/ru/citeck/components/form/controls/orgstruct-select.ftl">
							<control-param name="flatButtonMode">true
							</control-param>
						</control>
					</field>
					<field id="contracts:agreementNumber">
						<control>
							<control-param name="style">width:103px
							</control-param>
						</control>
					</field>
					<field id="idocs:performer">
						<control
							template="/ru/citeck/components/form/controls/orgstruct-select.ftl">
							<control-param name="flatButtonMode">true
							</control-param>
						</control>
					</field>
					<field id="contracts:agreementCurrency">
						<control template="/ru/citeck/components/form/controls/select.ftl">
							<control-param name="optionsUrl">/share/proxy/alfresco/citeck/search/simple?type=idocs:currency&amp;properties=idocs:currencyCode,idocs:currencyName</control-param>
							<control-param name="resultsList">nodes</control-param>
							<control-param name="valueField">nodeRef</control-param>
							<control-param name="titleField">title</control-param>
							<control-param name="style">width:103px</control-param>
						</control>
					</field>
					<field id="idocs:note">
						<control
								template="/org/alfresco/components/form/controls/textarea.ftl">
								<control-param name="style">width: 95%</control-param>
						</control>
					</field>
					<field id="payments:payments" for-mode="edit" set="payments">
						<control template="/ru/citeck/components/form/controls/table-children.ftl">
							<control-param name="columns">[
								{key: 'payments_typePayment', label: Alfresco.util.message('payment-schedule.payment-type'),formatter: Citeck.format.code({advance:"Аванс", rest:"Остаток"})},
								{key: "payments_plannedPaymentDate", label: Alfresco.util.message('payment-schedule.date'), formatter: Citeck.format.datetime('dd.MM.yyyy')},
								{key: "payments_currency_added", label: Alfresco.util.message('payment-schedule.currency'), formatter: Citeck.format.nodeRef("")},
								{key: "payments_paymentAmount", label: Alfresco.util.message('payment-schedule.sum') },
								{key: "payments_paymentVAT", label: Alfresco.util.message('payment-schedule.VAT') },
								{key: 'actions', label: Alfresco.util.message('payment-schedule.actions'), formatter:
								Citeck.format.actionsNonContent({panelID: "search-criteria",})},
								]
							</control-param>
							<control-param name="responseSchema">{
								resultsList: "props", fields: [
								{key: "payments_typePayment"},
								{key: "payments_plannedPaymentDate"},
								{key: "payments_currency_added"},
								{key: "payments_paymentAmount"},
								{key: "payments_paymentVAT"},
								{key: "nodeRef"},
								]}
							</control-param>
							<control-param name="destNode">workspace://SpacesStore/attachments-root</control-param>
							<control-param name="showAddButton">true</control-param>
							<control-param name="showCancelButton">true
							</control-param>
							<control-param name="showAddButton">true
							</control-param>
						</control>
					</field>
					<field id="idocs:signedVersion">
						<control
							template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="showTargetLink">true
							</control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>
	<config evaluator="model-type" condition="contracts:agreement">
		<forms>
			<form>
				<create-form template="/ru/citeck/components/form/contracts/agreement.ftl" />
					<field-visibility>
					<show id="contracts:agreementLegalEntity" />
					<show id="contracts:agreementSubject" />
					<show id="contracts:contractWith" />
					<show id="contracts:contractor" />
					<show id="contracts:agreementNumber" />
					<!--show id="contracts:documentNomination" /-->
					<show id="idocs:documentStatus" />
					<!--show id="idocs:registrationDate" for-mode="view"/>
					<show id="idocs:registrationNumber" for-mode="view" /-->
					<show id="contracts:agreementCurrency" />
					<show id="contracts:agreementDate" />
					<show id="contracts:agreementAmount" />
					<show id="contracts:duration" />
					<show id="contracts:VAT" />
					<show id="idocs:summary" />
					<show id="idocs:signatory" />
					<show id="idocs:performer" />
					<show id="idocs:pagesNumber" />
					<show id="idocs:appendixPagesNumber" />
					<show id="idocs:note" />
					<show id="dms:updateContent" />
					<show id="cm:content" />
					<show id="tk:kind"/>
					<show id="payments:payments" />
					<show id="cm:created" />
					<show id="cm:name" />
				</field-visibility>
					<appearance>
						<set id="" template="/ru/citeck/components/form/2-column-set.ftl" />
					<set id="payments" />
						<field id="contracts:agreementLegalEntity" mandatory="true">
							<control
									template="/ru/citeck/components/form/controls/association_search.ftl">
								<control-param name="flatButtonMode">true
								</control-param>
								<control-param name="searchWholeRepo">true
								</control-param>
								<control-param name="evaluateDLDestFolder">true
                                </control-param>
								<control-param name="showTargetLink">true
								</control-param>
							</control>
						</field>
						<field id="contracts:contractor" mandatory="true">
							<control
									template="/ru/citeck/components/form/controls/association_search.ftl">
								<control-param name="flatButtonMode">true
								</control-param>
								<control-param name="searchWholeRepo">true
								</control-param>
								<control-param name="journalFolderId">
                                    idocs.journal.idocs-contractor.title
                                </control-param>
								<control-param name="showTargetLink">true
								</control-param>
							</control>
						</field>
						<field id="contracts:agreementSubject">
							<control
									template="/ru/citeck/components/form/controls/association_search.ftl">
								<control-param name="flatButtonMode">true
								</control-param>
								<control-param name="searchWholeRepo">true
								</control-param>
								<control-param name="evaluateDLDestFolder">true
                                </control-param>
								<control-param name="showTargetLink">true
								</control-param>
							</control>
						</field>
						<field id="idocs:signatory">
							<control
									template="/ru/citeck/components/form/controls/orgstruct-select.ftl">
								<control-param name="flatButtonMode">true
								</control-param>
							</control>
						</field>
						<field id="idocs:performer">
							<control
									template="/ru/citeck/components/form/controls/orgstruct-select.ftl">
								<control-param name="flatButtonMode">true
								</control-param>
							</control>
						</field>
						<field id="cm:content">
                            <control template="/ru/citeck/components/form/controls/fileUpload.ftl" />
                        </field>
						<field id="contracts:agreementCurrency">
							<control template="/ru/citeck/components/form/controls/select.ftl">
								<control-param name="optionsUrl">/share/proxy/alfresco/citeck/search/simple?type=idocs:currency&amp;properties=idocs:currencyCode,idocs:currencyName</control-param>
								<control-param name="resultsList">nodes</control-param>
								<control-param name="valueField">nodeRef</control-param>
								<control-param name="titleField">title</control-param>
								<control-param name="selectedItem">workspace://SpacesStore/currency-rur</control-param>
								<control-param name="style">width:210px</control-param>
							</control>
						</field>
						<field id="idocs:note">
							<control
									template="/org/alfresco/components/form/controls/textarea.ftl">
								<control-param name="style">width: 95%</control-param>
							</control>
						</field>
						<!--field id="contracts:agreementNumber" >
                            <control
                                    template="/ru/citeck/components/form/controls/auto-manual.ftl">
                            </control>
                        </field-->
						<field id="payments:payments" set="payments">
                            <control template="/ru/citeck/components/form/controls/table-children.ftl">
                                <control-param name="columns">[
									{key: "payments_typePayment", label: Alfresco.util.message('payment-schedule.payment-type')},
                                    {key: "payments_plannedPaymentDate", label: Alfresco.util.message('payment-schedule.date'), formatter: Citeck.format.datetime('dd.MM.yyyy')},
                                    {key: "payments_currency_added", label: Alfresco.util.message('payment-schedule.currency'), formatter: Citeck.format.nodeRef("")},
                                    {key: "payments_paymentAmount", label: Alfresco.util.message('payment-schedule.sum') },
                                    {key: "payments_paymentVAT", label: Alfresco.util.message('payment-schedule.VAT') },
                                    {key: 'actions', label: Alfresco.util.message('payment-schedule.actions'), formatter:
                                    Citeck.format.actionsNonContent({panelID: "search-criteria",})},
                                    ]
                                </control-param>
                                <control-param name="responseSchema">{
                                    resultsList: "props", fields: [
									{key: "payments_typePayment"},
                                    {key: "payments_plannedPaymentDate"},
                                    {key: "payments_currency_added"},
                                    {key: "payments_paymentAmount"},
                                    {key: "payments_paymentVAT"},
                                    {key: "nodeRef"},
                                    ]}
                                </control-param>
							<control-param name="destNode">workspace://SpacesStore/attachments-root</control-param>
							<control-param name="showAddButton">true</control-param>
                            </control>
                        </field>
					</appearance>
				</form>

			<form id="search">
				<field-visibility>
					<show id="contracts:agreementNumber" />
					<show id="contracts:agreementLegalEntity" />
					<show id="contracts:contractor" />
					<show id="idocs:documentStatus" />
					<show id="contracts:agreementDate" />
					<show id="idocs:summary" />
					<show id="contracts:VAT" />
					<show id="contracts:agreementAmount" />
					<show id="contracts:agreementCurrency" />
					<show id="contracts:duration" />
					<show id="idocs:signatory" />
					<show id="idocs:performer" />
					<show id="idocs:pagesNumber" />
					<show id="idocs:appendixPagesNumber" />
					<show id="idocs:note" />
				</field-visibility>
				<appearance>
					<field id="contracts:agreementAmount">
						<control
							template="/ru/citeck/components/form/controls/number-richsearch.ftl" />
					</field>
					<field id="contracts:agreementCurrency">
						<control template="/ru/citeck/components/form/controls/select.ftl">
							<control-param name="optionsUrl">/share/proxy/alfresco/citeck/search/simple?type=idocs:currency&amp;properties=idocs:currencyCode,idocs:currencyName</control-param>
							<control-param name="resultsList">nodes</control-param>
							<control-param name="valueField">nodeRef</control-param>
							<control-param name="titleField">title</control-param>
							<control-param name="style">width:103px</control-param>
						</control>
					</field>
					<field id="contracts:duration">
						<control template="/org/alfresco/components/form/controls/daterange.ftl" />
					</field>
					<field id="idocs:registrationDate">
						<control template="/org/alfresco/components/form/controls/daterange.ftl" />
					</field>
					<field id="idocs:registrationNumber">
						<control template="/ru/citeck/components/form/controls/text-richsearch.ftl" />
					</field>
					<field id="idocs:summary">
						<control template="/ru/citeck/components/form/controls/text-richsearch.ftl" />
					</field>
					<field id="contracts:VAT">
						<control template="/ru/citeck/components/form/controls/number-richsearch.ftl" />
					</field>
					<field id="idocs:pagesNumber">
						<control
							template="/ru/citeck/components/form/controls/number-richsearch.ftl" />
					</field>
					<field id="idocs:appendixPagesNumber">
						<control
							template="/ru/citeck/components/form/controls/number-richsearch.ftl" />
					</field>
					<field id="contracts:agreementDate">
						<control template="/org/alfresco/components/form/controls/daterange.ftl" />
					</field>
					<field id="contracts:agreementNumber">
						<control template="/ru/citeck/components/form/controls/text-richsearch.ftl" />
					</field>
					<field id="idocs:documentStatus">
						<control
							template="/ru/citeck/components/form/controls/select-richsearch.ftl" />
					</field>
					<field id="contracts:agreementLegalEntity">
						<control
							template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true
							</control-param>
						</control>
					</field>
					<field id="contracts:contractor">
						<control
							template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true
							</control-param>
						</control>
					</field>
					<field id="idocs:signatory">
						<control
							template="/ru/citeck/components/form/controls/orgstruct-select.ftl">
						</control>
					</field>
					<field id="idocs:performer">
						<control
							template="/ru/citeck/components/form/controls/orgstruct-select.ftl">
						</control>
					</field>
				</appearance>
			</form>
			<form id="filters">
				<field-visibility>
					<show id="contracts:agreementLegalEntity" />
					<show id="contracts:agreementSubject" />
					<show id="cm:created" />
					<show id="cm:name" />
					<show id="idocs:documentStatus"  />
					<show id="contracts:contractor" />
					<show id="contracts:agreementNumber" />
					<show id="contracts:agreementCurrency" />
					<show id="contracts:agreementDate" />
					<show id="contracts:agreementAmount" />
					<show id="contracts:duration" />
					<show id="contracts:VAT" />
					<show id="contracts:contractWith" />
					<show id="idocs:pagesNumber" />
					<show id="idocs:signatory" />
					<show id="idocs:appendixPagesNumber" />
					<show id="idocs:performer" />
					<show id="idocs:summary" />
					<show id="idocs:note" />
					<show id="tk:kind"/>
				</field-visibility>
				<appearance>
					<field id="contracts:agreementLegalEntity" mandatory="true">
						<control
								template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="flatButtonMode">true
							</control-param>
							<control-param name="searchWholeRepo">true
							</control-param>
							<control-param name="evaluateDLDestFolder">true
							</control-param>
							<control-param name="showTargetLink">true
							</control-param>
						</control>
					</field>
					<field id="contracts:contractor" mandatory="true">
						<control
								template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="flatButtonMode">true
							</control-param>
							<control-param name="searchWholeRepo">true
							</control-param>
							<control-param name="journalFolderId">
								idocs.journal.idocs-contractor.title
							</control-param>
							<control-param name="showTargetLink">true
							</control-param>
						</control>
					</field>
					<field id="contracts:agreementSubject">
						<control
								template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="flatButtonMode">true
							</control-param>
							<control-param name="searchWholeRepo">true
							</control-param>
							<control-param name="evaluateDLDestFolder">true
							</control-param>
							<control-param name="showTargetLink">true
							</control-param>
						</control>
					</field>
					<field id="idocs:signatory">
						<control
								template="/ru/citeck/components/form/controls/orgstruct-select.ftl">
							<control-param name="flatButtonMode">true
							</control-param>
						</control>
					</field>
					<field id="idocs:performer">
						<control
								template="/ru/citeck/components/form/controls/orgstruct-select.ftl">
							<control-param name="flatButtonMode">true
							</control-param>
						</control>
					</field>
					<field id="contracts:agreementCurrency">
						<control template="/ru/citeck/components/form/controls/select.ftl">
							<control-param name="optionsUrl">/share/proxy/alfresco/citeck/search/simple?type=idocs:currency&amp;properties=idocs:currencyCode,idocs:currencyName</control-param>
							<control-param name="resultsList">nodes</control-param>
							<control-param name="valueField">nodeRef</control-param>
							<control-param name="titleField">title</control-param>
							<!--control-param name="selectedItem">workspace://SpacesStore/currency-rur</control-param-->
							<control-param name="style">width:210px</control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="node-type" condition="contracts:subject">
		<forms>
			<form>
				<field-visibility>
					<show id="contracts:subjectCode"/>
					<show id="contracts:subjectName"/>
					<show id="cm:taggable" force="true"/>
				</field-visibility>
				<appearance>
					<field id="cm:taggable">
						<control>
							<control-param name="compactMode">true</control-param>
							<control-param name="params">aspect=cm:taggable</control-param>
							<control-param name="createNewItemUri">/api/tag/workspace/SpacesStore</control-param>
							<control-param name="createNewItemIcon">tag</control-param>
							<control-param name="parentNodeRef">workspace://SpacesStore/tag:tag-root</control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>
	<config evaluator="model-type" condition="contracts:subject">
		<forms>
			<form>
				<create-form template="/ru/citeck/components/form/contracts/subject.ftl" />
				<field-visibility>
					<show id="contracts:subjectCode"/>
					<show id="contracts:subjectName"/>
					<show id="cm:taggable" force="true"/>
				</field-visibility>
				<appearance>
					<field id="cm:taggable">
						<control>
							<control-param name="compactMode">true</control-param>
							<control-param name="params">aspect=cm:taggable</control-param>
							<control-param name="createNewItemUri">/api/tag/workspace/SpacesStore</control-param>
							<control-param name="createNewItemIcon">tag</control-param>
							<control-param name="parentNodeRef">workspace://SpacesStore/tag:tag-root</control-param>
						</control>
					</field>
				</appearance>
			</form>
			<form id="search">
				<field-visibility>
					<show id="contracts:subjectCode"/>
					<show id="contracts:subjectName"/>
					<show id="cm:taggable" force="true"/>
				</field-visibility>
				<appearance>
					<field id="contracts:subjectCode">
						<control
								template="/ru/citeck/components/form/controls/text-richsearch.ftl"/>
					</field>
					<field id="contracts:subjectCode">
						<control
								template="/ru/citeck/components/form/controls/text-richsearch.ftl"/>
					</field>
					<field id="cm:taggable">
						<control>
							<control-param name="compactMode">true</control-param>
							<control-param name="params">aspect=cm:taggable</control-param>
							<control-param name="createNewItemUri">/api/tag/workspace/SpacesStore</control-param>
							<control-param name="createNewItemIcon">tag</control-param>
							<control-param name="parentNodeRef">workspace://SpacesStore/tag:tag-root</control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>	

	<config evaluator="node-type" condition="payments:period">
		<forms>
			<form>
				<field-visibility>
					<show id="payments:periodStart"/>
					<show id="payments:periodEnd"/>
				</field-visibility>
			</form>
		</forms>
	</config>
	
	<config evaluator="model-type" condition="contracts:documentType">
		<forms>
			<form>
				<create-form template="/ru/citeck/components/form/contracts/period.ftl" />
			</form>
		</forms>
	</config>

	<config evaluator="model-type" condition="payments:period">
		<forms>
			<form>
				<create-form template="/ru/citeck/components/form/contracts/period.ftl" />
				<field-visibility>
					<show id="payments:periodStart"/>
					<show id="payments:periodEnd"/>
				</field-visibility>
			</form>
			<form id="filters">
				<show id="cm:name"  />
				<show id="payments:periodStart"/>
				<show id="payments:periodEnd"/>
			</form>
		</forms>
	</config>
	
	<config evaluator="node-type" condition="payments:payment">
		<forms>
			<form>
				<edit-form template="/ru/citeck/components/form/contracts/payment.ftl" />
				<view-form template="/ru/citeck/components/form/contracts/payment.ftl" />
				<appearance>
					<field id="payments:basis">
						<control template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true</control-param>
						</control>
						<control-param name="showTargetLink">true
						</control-param>
					</field>
					<field id="payments:budgetItem">
						<control template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true</control-param>
						</control>
						<control-param name="showTargetLink">true
						</control-param>
					</field>
					<field id="payments:payer" mandatory="true">
						<control template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true</control-param>
						</control>
						<control-param name="showTargetLink">true
						</control-param>
					</field>
					<field id="payments:beneficiary" mandatory="true">
						<control template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true</control-param>
						</control>
						<control-param name="showTargetLink">true
						</control-param>
					</field>
					<field id="payments:beneficiaryAccount">
						<control template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true</control-param>
						</control>
						<control-param name="showTargetLink">true
						</control-param>
					</field>
					<field id="payments:period">
						<control template="/ru/citeck/components/form/controls/select.ftl">
							<control-param name="optionsUrl">/share/proxy/alfresco/citeck/search/simple?type=payments:period</control-param>
							<control-param name="resultsList">nodes</control-param>
							<control-param name="valueField">nodeRef</control-param>
							<control-param name="titleField">name</control-param>
							<control-param name="style">width:210px</control-param>
						</control>
					</field>
					<field id="payments:currency">
						<control template="/ru/citeck/components/form/controls/select.ftl">
							<control-param name="optionsUrl">/share/proxy/alfresco/citeck/search/simple?type=idocs:currency&amp;properties=idocs:currencyCode,idocs:currencyName</control-param>
							<control-param name="resultsList">nodes</control-param>
							<control-param name="valueField">nodeRef</control-param>
							<control-param name="titleField">title</control-param>
							<control-param name="style">width:103px</control-param>
						</control>
					</field>
				</appearance>
			</form>

		</forms>
	</config>
	
	<config evaluator="model-type" condition="payments:payment">
		<forms>

			<form id="by-agreement">
				<create-form template="/ru/citeck/components/form/contracts/payment.ftl" />
			</form>

			<form>
				<create-form template="/ru/citeck/components/form/contracts/payment.ftl" />
				<appearance>
					<field id="payments:basis">
						<control template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true</control-param>
						</control>
						<control-param name="showTargetLink">true
						</control-param>
					</field>
					<field id="payments:budgetItem">
						<control template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true</control-param>
						</control>
						<control-param name="showTargetLink">true
						</control-param>
					</field>
					<field id="payments:payer" >
						<control template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true</control-param>
						</control>
						<control-param name="showTargetLink">true
						</control-param>
					</field>
					<field id="payments:beneficiary" >
						<control template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true</control-param>
						</control>
						<control-param name="showTargetLink">true
						</control-param>
					</field>
					<field id="payments:beneficiaryAccount">
						<control template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true</control-param>
						</control>
						<control-param name="showTargetLink">true
						</control-param>
					</field>
					<field id="payments:period">
						<control template="/ru/citeck/components/form/controls/select.ftl">
							<control-param name="optionsUrl">/share/proxy/alfresco/citeck/search/simple?type=payments:period</control-param>
							<control-param name="resultsList">nodes</control-param>
							<control-param name="valueField">nodeRef</control-param>
							<control-param name="titleField">name</control-param>
							<control-param name="style">width:210px</control-param>
						</control>
					</field>
					<field id="payments:currency">
						<control template="/ru/citeck/components/form/controls/select.ftl">
							<control-param name="optionsUrl">/share/proxy/alfresco/citeck/search/simple?type=idocs:currency&amp;properties=idocs:currencyCode,idocs:currencyName</control-param>
							<control-param name="resultsList">nodes</control-param>
							<control-param name="valueField">nodeRef</control-param>
							<control-param name="titleField">title</control-param>
							<control-param name="selectedItem">workspace://SpacesStore/currency-rur</control-param>
							<control-param name="style">width:103px</control-param>
						</control>
					</field>
				</appearance>
			</form>

			<form id="search">
				<field-visibility>
					<show id="idocs:documentStatus" />
					<show id="cm:created" />
					<show id="payments:basis" />
					<show id="payments:budgetItem" />
					<show id="payments:paymentFor" />
					<show id="payments:paymentPurpose" />
					<show id="payments:payer" />
					<show id="payments:beneficiary" />
					<show id="payments:paymentArrangement" />
					<show id="payments:beneficiaryAccount" />
					<show id="payments:beneficiaryType" />
					<show id="payments:plannedPaymentDate" />
					<show id="payments:period" />
					<show id="payments:paymentDate" />
					<show id="payments:currency" />
					<show id="payments:paymentAmount" />
					<show id="payments:paymentVAT" />
					<show id="payments:overexpenditure" />
					<show id="payments:billDate" />
				</field-visibility>
				<appearance>
					<field id="idocs:documentStatus">
						<control
								template="/ru/citeck/components/form/controls/select-richsearch.ftl" />
					</field>
					<field id="cm:created">
						<control template="/org/alfresco/components/form/controls/daterange.ftl" />
					</field>
					<field id="payments:basis">
						<control
							template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true
						</control-param>
						</control>
					</field>
					<field id="payments:budgetItem">
						<control
								template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true
							</control-param>
						</control>
					</field>
					<field id="payments:paymentFor">
						<control template="/ru/citeck/components/form/controls/select-richsearch.ftl" />
					</field>
					<field id="payments:paymentPurpose">
						<control template="/org/alfresco/components/form/controls/textarea.ftl" />
					</field>
					<field id="payments:payer">
						<control
								template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true
							</control-param>
						</control>
					</field>
					<field id="payments:paymentArrangement">
						<control template="/ru/citeck/components/form/controls/select-richsearch.ftl" />
					</field>
					<field id="payments:beneficiary">
						<control
								template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true
							</control-param>
						</control>
					</field>
					<field id="payments:beneficiaryAccount">
						<control
								template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true
							</control-param>
						</control>
					</field>
					<field id="payments:beneficiaryType">
						<control template="/ru/citeck/components/form/controls/select-richsearch.ftl" />
					</field>
					<field id="payments:plannedPaymentDate">
						<control template="/org/alfresco/components/form/controls/daterange.ftl" />
					</field>
					<field id="payments:period">
						<control template="/ru/citeck/components/form/controls/select.ftl">
							<control-param name="optionsUrl">/share/proxy/alfresco/citeck/search/simple?type=payments:period</control-param>
							<control-param name="resultsList">nodes</control-param>
							<control-param name="valueField">nodeRef</control-param>
							<control-param name="titleField">name</control-param>
							<control-param name="style">width:210px</control-param>
						</control>
					</field>
					<field id="payments:paymentDate">
						<control template="/org/alfresco/components/form/controls/daterange.ftl" />
					</field>
					<field id="payments:currency">
						<control template="/ru/citeck/components/form/controls/select.ftl">
							<control-param name="optionsUrl">/share/proxy/alfresco/citeck/search/simple?type=idocs:currency&amp;properties=idocs:currencyCode,idocs:currencyName</control-param>
							<control-param name="resultsList">nodes</control-param>
							<control-param name="valueField">nodeRef</control-param>
							<control-param name="titleField">title</control-param>
							<control-param name="style">width:103px</control-param>
						</control>
					</field>
					<field id="payments:paymentAmount">
						<control template="/ru/citeck/components/form/controls/number-richsearch.ftl" />
					</field>
					<field id="payments:paymentVAT">
						<control template="/ru/citeck/components/form/controls/number-richsearch.ftl" />
					</field>
					<field id="payments:overexpenditure">
						<control template="/ru/citeck/components/form/controls/boolean-richsearch.ftl" />
					</field>

				</appearance>
			</form>
			<form id="filters">
			<field-visibility>
				<show id="idocs:documentStatus" />
				<show id="cm:name" />
				<show id="cm:created" />
				<show id="payments:basis" />
				<show id="payments:budgetItem" />
				<show id="payments:paymentFor" />
				<show id="payments:paymentPurpose" />
				<show id="payments:payer" />
				<show id="payments:beneficiary" />
				<show id="payments:paymentArrangement" />
				<show id="payments:beneficiaryAccount" />
				<show id="payments:beneficiaryType" />
				<show id="payments:plannedPaymentDate" />
				<show id="payments:period" />
				<show id="payments:paymentDate" />
				<show id="payments:currency" />
				<show id="payments:paymentAmount" />
				<show id="payments:paymentVAT" />
				<show id="payments:overexpenditure" />
				<show id="payments:billDate" />
				<show id="payments:paymentComment" />
			</field-visibility>
				<appearance>
					<field id="payments:basis">
						<control template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true</control-param>
						</control>
						<control-param name="showTargetLink">true
						</control-param>
					</field>
					<field id="payments:budgetItem">
						<control template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true</control-param>
						</control>
						<control-param name="showTargetLink">true
						</control-param>
					</field>
					<field id="payments:payer" >
						<control template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true</control-param>
						</control>
						<control-param name="showTargetLink">true
						</control-param>
					</field>
					<field id="payments:beneficiary" >
						<control template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true</control-param>
						</control>
						<control-param name="showTargetLink">true
						</control-param>
					</field>
					<field id="payments:beneficiaryAccount">
						<control template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true</control-param>
						</control>
						<control-param name="showTargetLink">true
						</control-param>
					</field>
					<field id="payments:period">
						<control template="/ru/citeck/components/form/controls/select.ftl">
							<control-param name="optionsUrl">/share/proxy/alfresco/citeck/search/simple?type=payments:period</control-param>
							<control-param name="resultsList">nodes</control-param>
							<control-param name="valueField">nodeRef</control-param>
							<control-param name="titleField">name</control-param>
							<control-param name="style">width:210px</control-param>
						</control>
					</field>
					<field id="payments:currency">
						<control template="/ru/citeck/components/form/controls/select.ftl">
							<control-param name="optionsUrl">/share/proxy/alfresco/citeck/search/simple?type=idocs:currency&amp;properties=idocs:currencyCode,idocs:currencyName</control-param>
							<control-param name="resultsList">nodes</control-param>
							<control-param name="valueField">nodeRef</control-param>
							<control-param name="titleField">title</control-param>
							<!--control-param name="selectedItem">workspace://SpacesStore/currency-rur</control-param-->
							<control-param name="style">width:103px</control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>
	
	<config evaluator="node-type" condition="payments:paymentDraft">
		<forms>
			<form>
				<field-visibility>
					<show id="payments:plannedPaymentDate" />
					<show id="payments:currency" />
					<show id="payments:paymentAmount" />
					<show id="payments:paymentVAT" />
					<show id="payments:typePayment" />
					<show id="payments:description" />

				</field-visibility>
				<appearance>
					<set id="" template="/ru/citeck/components/form/2-column-set.ftl" />
					<field id="payments:currency">
						<control template="/ru/citeck/components/form/controls/select.ftl">
							<control-param name="optionsUrl">/share/proxy/alfresco/citeck/search/simple?type=idocs:currency&amp;properties=idocs:currencyCode,idocs:currencyName</control-param>
							<control-param name="resultsList">nodes</control-param>
							<control-param name="valueField">nodeRef</control-param>
							<control-param name="titleField">title</control-param>
							<control-param name="style">width:103px</control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>
	
	<config evaluator="model-type" condition="payments:paymentDraft">
		<forms>
			<form>
				<field-visibility>
					<show id="payments:plannedPaymentDate" />
					<show id="payments:currency" force="true"/>
					<show id="payments:paymentAmount" />
					<show id="payments:paymentVAT" />
					<show id="payments:typePayment" />
					<show id="payments:description" />
					<show id="sys:node-uuid" />
				</field-visibility>
				<appearance>
					<set id="" template="/ru/citeck/components/form/2-column-set.ftl"/>
					<field id="sys:node-uuid">
						<control template="/ru/citeck/components/form/controls/assoc-type.ftl">
							<!--control-param name="assocType">sys:children</control-param-->
							<control-param name="assocType">payments:payments</control-param>
						</control>
			   		</field>
					<field id="payments:currency">
						<control template="/ru/citeck/components/form/controls/select.ftl">
							<control-param name="optionsUrl">/share/proxy/alfresco/citeck/search/simple?type=idocs:currency&amp;properties=idocs:currencyCode,idocs:currencyName</control-param>
							<control-param name="resultsList">nodes</control-param>
							<control-param name="valueField">nodeRef</control-param>
							<control-param name="titleField">title</control-param>
							<control-param name="selectedItem">workspace://SpacesStore/currency-rur</control-param>
							<control-param name="style">width:103px</control-param>
						</control>
					</field>
				</appearance>
			</form>

		</forms>
	</config>

	<config evaluator="node-type" condition="idocs:contractor">
		<forms>
			<form>
				<field-visibility>
					<show id="idocs:fullOrganizationName"/>
					<show id="idocs:shortOrganizationName"/>
					<show id="idocs:juridicalAddress"/>
					<show id="idocs:postAddress"/>
					<show id="idocs:inn"/>
					<show id="idocs:kpp"/>
					<show id="idocs:phone"/>
					<show id="idocs:fax"/>
					<show id="idocs:email"/>
					<show id="idocs:CEOname"/>
					<show id="idocs:contacts"/>
					<show id="idocs:nameInGenitiveCase" force="true"/>
				</field-visibility>
				<appearance>
					<set id=""
						 template="/ru/citeck/components/form/2-column-set.ftl"/>
					<field id="idocs:contacts">
						<control
								template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="flatButtonMode">true
							</control-param>
							<control-param name="searchWholeRepo">true
							</control-param>
						</control>
					</field>
					<field id="idocs:nameInGenitiveCase" help="Например, Ивановой Марии Петровны" />
					<field id="idocs:fullOrganizationName">
						<constraint-handlers>
							<constraint type="ru.citeck.alfresco.acm.constraints.dms.UniqueConstraint" validation-handler="Alfresco.forms.validation.checkunique" event="keyup"  message-id="forms.message.uniqueName"/>
						</constraint-handlers>
					</field>
				</appearance>
			</form>
		</forms>
	</config>
	<config evaluator="model-type" condition="idocs:contractor">
		<forms>
			<form>
				<field-visibility>
					<show id="idocs:fullOrganizationName"/>
					<show id="idocs:shortOrganizationName"/>
					<show id="idocs:juridicalAddress"/>
					<show id="idocs:postAddress"/>
					<show id="idocs:inn"/>
					<show id="idocs:kpp"/>
					<show id="idocs:phone"/>
					<show id="idocs:fax"/>
					<show id="idocs:email"/>
					<show id="idocs:CEOname"/>
					<show id="idocs:contacts"/>
					<show id="idocs:nameInGenitiveCase" force="true"/>
				</field-visibility>
				<appearance>
					<set id=""
						 template="/ru/citeck/components/form/2-column-set.ftl"/>
					<field id="idocs:contacts">
						<control
								template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="flatButtonMode">true
							</control-param>
							<control-param name="searchWholeRepo">true
							</control-param>
						</control>
					</field>
					<field id="idocs:nameInGenitiveCase" help="Например, Ивановой Марии Петровны" />
					<field id="idocs:fullOrganizationName">
						<constraint-handlers>
							<constraint type="ru.citeck.alfresco.acm.constraints.dms.UniqueConstraint" validation-handler="Alfresco.forms.validation.checkunique" event="keyup" message-id="forms.message.uniqueName"/>
						</constraint-handlers>
					</field>
				</appearance>
			</form>
			<form id="search">
				<field-visibility>
					<show id="idocs:fullOrganizationName"/>
					<show id="idocs:shortOrganizationName"/>
					<show id="idocs:juridicalAddress"/>
					<show id="idocs:postAddress"/>
					<show id="idocs:inn"/>
					<show id="idocs:kpp"/>
					<show id="idocs:phone"/>
					<show id="idocs:fax"/>
					<show id="idocs:email"/>
					<show id="idocs:CEOname"/>
					<show id="idocs:contacts"/>
				</field-visibility>
				<appearance>
					<field id="idocs:fullOrganizationName">
						<control
								template="/ru/citeck/components/form/controls/text-richsearch.ftl"/>
					</field>
					<field id="idocs:shortOrganizationName">
						<control
								template="/ru/citeck/components/form/controls/text-richsearch.ftl"/>
					</field>
					<field id="idocs:juridicalAddress">
						<control
								template="/ru/citeck/components/form/controls/text-richsearch.ftl"/>
					</field>
					<field id="idocs:postAddress">
						<control
								template="/ru/citeck/components/form/controls/text-richsearch.ftl"/>
					</field>
					<field id="idocs:inn">
						<control
								template="/ru/citeck/components/form/controls/text-richsearch.ftl"/>
					</field>
					<field id="idocs:kpp">
						<control
								template="/ru/citeck/components/form/controls/text-richsearch.ftl"/>
					</field>
					<field id="idocs:phone">
						<control
								template="/ru/citeck/components/form/controls/text-richsearch.ftl"/>
					</field>
					<field id="idocs:fax">
						<control
								template="/ru/citeck/components/form/controls/text-richsearch.ftl"/>
					</field>
					<field id="idocs:email">
						<control
								template="/ru/citeck/components/form/controls/text-richsearch.ftl"/>
					</field>
					<field id="idocs:CEOname">
						<control
								template="/ru/citeck/components/form/controls/text-richsearch.ftl"/>
					</field>
					<field id="idocs:contacts">
						<control
								template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="flatButtonMode">true
							</control-param>
							<control-param name="searchWholeRepo">true
							</control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="node-type" condition="contracts:closingDocument">
		<forms>
			<form>
				<edit-form template="/ru/citeck/components/form/contracts/closing-document.ftl" />
				<view-form template="/ru/citeck/components/form/contracts/closing-document.ftl" />
				<field-visibility>
					<show id="tk:kind"/>
					<show id="cm:name" />
					<show id="idocs:documentStatus" />
					<show id="contracts:closingDocumentNumber" />
					<show id="contracts:closingDocumentDate"/>
					<show id="contracts:closingDocumentSigner"/>
					<show id="idocs:legalEntity"/>
					<show id="contracts:closingDocumentPayment" />
					<show id="contracts:closingDocumentAgreement" />
					<show id="contracts:closingDocumentOriginalLocation" />
					<show id="cm:content" />
					<show id="cm:created" />
				</field-visibility>
				<appearance>
					<field id="contracts:closingDocumentPayment">
						<control template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true</control-param>
							<control-param name="itemType">payments:payment</control-param>
							<control-param name="showTargetLink">true</control-param>
						</control>
					</field>
					<field id="contracts:closingDocumentAgreement">
						<control template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true</control-param>
							<control-param name="itemType">contracts:agreement</control-param>
							<control-param name="showTargetLink">true</control-param>
						</control>
					</field>
					<field id="contracts:closingDocumentOriginalLocation">
						<control template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true</control-param>
							<control-param name="itemType">contracts:originalLocation</control-param>
							<control-param name="showTargetLink">true</control-param>
						</control>
					</field>
					<field id="contracts:closingDocumentSigner">
						<control template="/ru/citeck/components/form/controls/orgstruct-select.ftl">
						</control>
					</field>
					<field id="idocs:legalEntity">
						<control template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true</control-param>
							<control-param name="showTargetLink">true</control-param>
						</control>
					</field>
					<field id="tk:kind" lable="Вид документа">
						<control template="/org/alfresco/components/form/controls/category.ftl">
							<control-param name="parentNodeRef">workspace://SpacesStore/contracts-cat-doctype-closing-doc</control-param>
						</control>
					</field>
				</appearance>
			</form>
			<form id="filters">
				<field-visibility>
					<show id="tk:kind"/>
					<show id="cm:name" />
					<show id="contracts:closingDocumentNumber" />
					<show id="contracts:closingDocumentDate"/>
					<show id="contracts:closingDocumentSigner"/>
					<show id="idocs:legalEntity"/>
					<show id="contracts:closingDocumentPayment" />
					<show id="contracts:closingDocumentAgreement" />
					<show id="idocs:documentStatus" />
					<show id="cm:created" />
					<show id="contracts:closingDocumentSentToAccountDep"/>
					<show id="contracts:closingDocumentReceiveAccountDepDate"/>
					<show id="contracts:closingDocumentOriginalLocation" />
				</field-visibility>
				<appearance>
					<field id="contracts:closingDocumentPayment">
						<control template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true</control-param>
							<control-param name="itemType">payments:payment</control-param>
						</control>
					</field>
					<field id="contracts:closingDocumentAgreement">
						<control template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true</control-param>
							<control-param name="itemType">contracts:agreement</control-param>
						</control>
					</field>
					<field id="contracts:closingDocumentSigner">
						<control template="/ru/citeck/components/form/controls/orgstruct-select.ftl">
						</control>
					</field>
					<field id="idocs:legalEntity">
						<control template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true</control-param>
							<control-param name="showTargetLink">true</control-param>
						</control>
					</field>
					<field id="tk:kind" lable="Вид документа">
						<control template="/org/alfresco/components/form/controls/category.ftl">
							<control-param name="parentNodeRef">workspace://SpacesStore/contracts-cat-doctype-closing-doc</control-param>
						</control>
					</field>
					<field id="contracts:closingDocumentOriginalLocation">
						<control template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true</control-param>
							<control-param name="itemType">contracts:originalLocation</control-param>
							<control-param name="showTargetLink">true</control-param>
						</control>
					</field>
				</appearance>
			</form>

		</forms>
	</config>

	<config evaluator="model-type" condition="contracts:closingDocument">
		<forms>
			<form id="by-agreement">
				<create-form template="/ru/citeck/components/form/contracts/closing-document.ftl" />
			</form>
			<form>
				<create-form template="/ru/citeck/components/form/contracts/closing-document.ftl" />
				<field-visibility>
				</field-visibility>
				<appearance>
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="node-type" condition="contracts:supplementaryAgreement">
		<forms>
			<form>
				<edit-form template="/ru/citeck/components/form/contracts/supAgreement.ftl" />
				<view-form template="/ru/citeck/components/form/contracts/supAgreement.ftl" />
			<field-visibility>
				<show id="contracts:mainAgreement" />
				<show id="contracts:agreementLegalEntity" />
				<show id="contracts:agreementSubject" />
				<show id="idocs:documentStatus" />
				<show id="idocs:registrationDate" for-mode="view"/>
				<show id="idocs:registrationNumber" for-mode="view" />
				<show id="contracts:contractor" />
				<show id="contracts:agreementNumber" />
				<show id="contracts:agreementCurrency" />
				<show id="contracts:agreementDate" />
				<show id="contracts:agreementAmount" />
				<show id="contracts:duration" />
				<show id="contracts:VAT" />
				<show id="contracts:contractWith" />
				<show id="idocs:pagesNumber" />
				<show id="idocs:signatory" />
				<show id="idocs:appendixPagesNumber" />
				<show id="idocs:performer" />
				<show id="idocs:summary" />
				<show id="idocs:registrationDate" for-mode="view" />
				<show id="idocs:registrationNumber" for-mode="view" />
				<show id="idocs:note" />
				<show id="tk:kind"/>
				<show id="payments:payments" for-mode="edit"/>
				<show id="idocs:signedVersion" for-mode="view"/>
			</field-visibility>
			<appearance>
				<set id="" template="/ru/citeck/components/form/2-column-set.ftl" />
				<set id="payments" />
				<field id="contracts:mainAgreement" mandatory="true">
					<control
							template="/ru/citeck/components/form/controls/association_search.ftl">
						<control-param name="flatButtonMode">true
						</control-param>
						<control-param name="searchWholeRepo">true
						</control-param>
						<control-param name="showTargetLink">true
						</control-param>
					</control>
				</field>
				<field id="contracts:agreementLegalEntity" mandatory="true">
					<control
							template="/ru/citeck/components/form/controls/association_search.ftl">
						<control-param name="flatButtonMode">true
						</control-param>
						<control-param name="searchWholeRepo">true
						</control-param>
						<control-param name="showTargetLink">true
						</control-param>
					</control>
				</field>
				<field id="contracts:contractor" mandatory="true">
					<control
							template="/ru/citeck/components/form/controls/association_search.ftl">
						<control-param name="flatButtonMode">true
						</control-param>
						<control-param name="searchWholeRepo">true
						</control-param>
						<control-param name="journalFolderId">
							idocs.journal.idocs-contractor.title
						</control-param>
						<control-param name="showTargetLink">true
						</control-param>
					</control>
				</field>
				<field id="contracts:agreementSubject">
					<control
							template="/ru/citeck/components/form/controls/association_search.ftl">
						<control-param name="flatButtonMode">true
						</control-param>
						<control-param name="searchWholeRepo">true
						</control-param>
						<control-param name="showTargetLink">true
						</control-param>
					</control>
				</field>
				<field id="idocs:signatory">
					<control
							template="/ru/citeck/components/form/controls/orgstruct-select.ftl">
						<control-param name="flatButtonMode">true
						</control-param>
					</control>
				</field>
				<field id="contracts:agreementNumber">
					<control>
						<control-param name="style">width:103px
						</control-param>
					</control>
				</field>
				<field id="idocs:performer">
					<control
							template="/ru/citeck/components/form/controls/orgstruct-select.ftl">
						<control-param name="flatButtonMode">true
						</control-param>
					</control>
				</field>
				<field id="contracts:agreementCurrency">
					<control template="/ru/citeck/components/form/controls/select.ftl">
						<control-param name="optionsUrl">/share/proxy/alfresco/citeck/search/simple?type=idocs:currency&amp;properties=idocs:currencyCode,idocs:currencyName</control-param>
						<control-param name="resultsList">nodes</control-param>
						<control-param name="valueField">nodeRef</control-param>
						<control-param name="titleField">title</control-param>
						<control-param name="style">width:103px</control-param>
					</control>
				</field>
				<field id="idocs:note">
					<control
							template="/org/alfresco/components/form/controls/textarea.ftl">
						<control-param name="style">width: 95%</control-param>
					</control>
				</field>
				<field id="payments:payments" for-mode="edit" set="payments">
					<control template="/ru/citeck/components/form/controls/table-children.ftl">
						<control-param name="columns">[
							{key: "payments_plannedPaymentDate", label: "Дата", formatter: Citeck.format.datetime('dd.MM.yyyy')},
							{key: "payments_currency_added", label: "Валюта", formatter: Citeck.format.nodeRef("")},
							{key: "payments_paymentAmount", label: "Сумма" },
							{key: "payments_paymentVAT", label: "НДС" },
							{key: 'actions', label: 'Действия', formatter:
							Citeck.format.actionsNonContent({panelID: "search-criteria",})},
							]
						</control-param>
						<control-param name="responseSchema">{
							resultsList: "props", fields: [
							{key: "payments_plannedPaymentDate"},
							{key: "payments_currency_added"},
							{key: "payments_paymentAmount"},
							{key: "payments_paymentVAT"},
							{key: "nodeRef"},
							]}
						</control-param>
						<control-param name="destNode">workspace://SpacesStore/attachments-root
						</control-param>
						<control-param name="showCancelButton">true
						</control-param>
						<control-param name="showAddButton">true
						</control-param>
					</control>
				</field>
				<field id="idocs:signedVersion">
					<control
						template="/ru/citeck/components/form/controls/association_search.ftl">
						<control-param name="showTargetLink">true
						</control-param>
					</control>
				</field>
			</appearance>
			</form>
		</forms>
	</config>


	<config evaluator="model-type" condition="contracts:supplementaryAgreement">
		<forms>
			<form id="by-agreement">
				<create-form template="/ru/citeck/components/form/contracts/supAgreement.ftl" />
			</form>
			<form>
				<create-form template="/ru/citeck/components/form/contracts/supAgreement.ftl" />
				<field-visibility>
					<show id="contracts:mainAgreement" />
					<show id="contracts:agreementLegalEntity" />
					<show id="contracts:agreementSubject" />
					<show id="idocs:documentStatus" />
					<show id="idocs:registrationDate" for-mode="view"/>
					<show id="idocs:registrationNumber" for-mode="view" />
					<show id="idocs:registrationNumber" />
					<show id="contracts:contractor" />
					<show id="contracts:agreementNumber" />
					<show id="contracts:agreementCurrency" />
					<show id="contracts:agreementDate" />
					<show id="contracts:agreementAmount" />
					<show id="contracts:duration" />
					<show id="contracts:VAT" />
					<show id="contracts:contractWith" />
					<show id="idocs:pagesNumber" />
					<show id="idocs:signatory" />
					<show id="idocs:appendixPagesNumber" />
					<show id="idocs:performer" />
					<show id="idocs:summary" />
					<show id="idocs:registrationDate" />
					<show id="idocs:registrationNumber" for-mode="view" />
					<!--show id="contracts:documentNomination" /-->
					<show id="idocs:note" />
					<show id="dms:updateContent" />
					<show id="cm:content" />
					<show id="tk:kind"/>
					<show id="payments:payments" />
					<show id="cm:created" />
					<show id="cm:name" />
				</field-visibility>
				<appearance>
				</appearance>
			</form>
			<form id="filters">
				<field-visibility>
					<show id="contracts:mainAgreement" />
					<show id="contracts:agreementLegalEntity" />
					<show id="contracts:agreementSubject" />
					<show id="idocs:documentStatus" />
					<show id="idocs:registrationDate" for-mode="view"/>
					<show id="idocs:registrationNumber" for-mode="view" />
					<show id="idocs:registrationNumber" />
					<show id="contracts:contractor" />
					<show id="contracts:agreementNumber" />
					<show id="contracts:agreementCurrency" />
					<show id="contracts:agreementDate" />
					<show id="contracts:agreementAmount" />
					<show id="contracts:duration" />
					<show id="contracts:VAT" />
					<show id="contracts:contractWith" />
					<show id="idocs:pagesNumber" />
					<show id="idocs:signatory" />
					<show id="idocs:appendixPagesNumber" />
					<show id="idocs:performer" />
					<show id="idocs:summary" />
					<show id="idocs:registrationDate" />
					<show id="idocs:registrationNumber" for-mode="view" />
					<!--show id="contracts:documentNomination" /-->
					<show id="idocs:note" />
					<show id="dms:updateContent" />
					<show id="cm:content" />
					<show id="tk:kind"/>
					<show id="payments:payments" />
					<show id="cm:created" />
					<show id="cm:name" />
				</field-visibility>
				<appearance>
					<set id="" template="/ru/citeck/components/form/2-column-set.ftl" />
					<set id="payments" />
					<field id="contracts:mainAgreement" mandatory="true">
						<control
								template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="flatButtonMode">true
							</control-param>
							<control-param name="searchWholeRepo">true
							</control-param>
						</control>
					</field>
					<field id="contracts:agreementLegalEntity" mandatory="true">
						<control
								template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="flatButtonMode">true
							</control-param>
							<control-param name="searchWholeRepo">true
							</control-param>
						</control>
					</field>
					<field id="contracts:contractor" mandatory="true">
						<control
								template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="flatButtonMode">true
							</control-param>
							<control-param name="searchWholeRepo">true
							</control-param>
						</control>
					</field>
					<field id="contracts:agreementSubject">
						<control
								template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="flatButtonMode">true
							</control-param>
							<control-param name="searchWholeRepo">true
							</control-param>
							<control-param name="showTargetLink">true
							</control-param>
						</control>
					</field>
					<field id="idocs:signatory">
						<control
								template="/ru/citeck/components/form/controls/orgstruct-select.ftl">
							<control-param name="flatButtonMode">true
							</control-param>
						</control>
					</field>
					<field id="contracts:agreementNumber">
						<control>
							<control-param name="style">width:103px
							</control-param>
						</control>
					</field>
					<field id="idocs:performer">
						<control
								template="/ru/citeck/components/form/controls/orgstruct-select.ftl">
							<control-param name="flatButtonMode">true
							</control-param>
						</control>
					</field>
					<field id="contracts:agreementCurrency">
						<control template="/ru/citeck/components/form/controls/select.ftl">
							<control-param name="optionsUrl">/share/proxy/alfresco/citeck/search/simple?type=idocs:currency&amp;properties=idocs:currencyCode,idocs:currencyName</control-param>
							<control-param name="resultsList">nodes</control-param>
							<control-param name="valueField">nodeRef</control-param>
							<control-param name="titleField">title</control-param>
							<control-param name="style">width:103px</control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="model-type" condition="idocs:doc">
		<forms>
			<form id="search">
				<field-visibility>
					<!--show id="idocs:legalEntity" /-->
					<show id="tk:kind" />
					<show id="cm:name" />
					<show id="idocs:registrationNumber" />
					<show id="idocs:note" />
					<show id="idocs:appendixPagesNumber" />
					<show id="idocs:pagesNumber" />
					<show id="cm:created" />
					<show id="idocs:registrationDate" />
					<!--show id="cm:modifier" /-->
					<show id="cm:modified" />"
				</field-visibility>
				<appearance>
					<!--field id="idocs:legalEntity">
						<control template="/ru/citeck/components/form/controls/association_search.ftl">
							<control-param name="searchWholeRepo">true</control-param>
							<control-param name="showTargetLink">true</control-param>
						</control>
					</field-->
					<field id="cm:created">
					<control template="/org/alfresco/components/form/controls/daterange.ftl" >
					</control>
				</field>
					<field id="cm:name">
						<control template="/ru/citeck/components/form/controls/text-richsearch.ftl"/>
					</field>
					<field id="tk:kind" lable="Вид документа">
						<control template="/org/alfresco/components/form/controls/category.ftl">
							<control-param name="parentNodeRef">workspace://SpacesStore/contracts-cat-doctype-contract</control-param>
						</control>
					</field>
					<field id="idocs:registrationDate">
					<control template="/org/alfresco/components/form/controls/daterange.ftl" />
				</field>
					<!--field id="cm:modifier">
						<control template="/ru/citeck/components/form/controls/text-richsearch.ftl" />
					</field-->
					<field id="cm:modified">
						<control template="/org/alfresco/components/form/controls/daterange.ftl" />
					</field>
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="node-type" condition="contracts:originalLocation">
		<forms>
			<form>
				<field-visibility>
					<show id="cm:name"/>
				</field-visibility>
			</form>
		</forms>
	</config>
	<config evaluator="model-type" condition="contracts:originalLocation">
		<forms>
			<form>
				<field-visibility>
					<show id="cm:name"/>
				</field-visibility>
			</form>
			<form id="search">
				<field-visibility>
					<show id="cm:name"/>
				</field-visibility>
				<appearance>
					<field id="cm:name">
						<control template="/ru/citeck/components/form/controls/text-richsearch.ftl"/>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="node-type" condition="idocs:legalEntity">
		<forms>
			<form>
				<field-visibility>
					<show id="idocs:code"/>
					<show id="idocs:fullOrganizationName"/>
					<show id="idocs:shortOrganizationName"/>
					<show id="idocs:juridicalAddress"/>
					<show id="idocs:postAddress"/>
					<show id="idocs:okpo"/>
					<show id="idocs:ogrn"/>
					<show id="idocs:inn"/>
					<show id="idocs:kpp"/>
					<show id="idocs:generalDirector"/>
					<show id="idocs:accountantGeneral"/>
					<show id="idocs:phoneNumber"/>
				</field-visibility>
				<appearance>
					<set id=""
						 template="/ru/citeck/components/form/2-column-set.ftl"/>
					<field id="idocs:fullOrganizationName">
						<constraint-handlers>
							<constraint type="ru.citeck.alfresco.acm.constraints.dms.UniqueConstraint" validation-handler="Alfresco.forms.validation.checkunique" event="keyup" message-id="forms.message.uniqueName"/>
						</constraint-handlers>
					</field>
				</appearance>
			</form>
		</forms>
	</config>
	<config evaluator="model-type" condition="idocs:legalEntity">
		<forms>
			<form>
				<field-visibility>
					<show id="idocs:code"/>
					<show id="idocs:fullOrganizationName"/>
					<show id="idocs:shortOrganizationName"/>
					<show id="idocs:juridicalAddress"/>
					<show id="idocs:postAddress"/>
					<show id="idocs:okpo"/>
					<show id="idocs:ogrn"/>
					<show id="idocs:inn"/>
					<show id="idocs:kpp"/>
					<show id="idocs:generalDirector"/>
					<show id="idocs:accountantGeneral"/>
					<show id="idocs:phoneNumber"/>
				</field-visibility>
				<appearance>
					<set id=""
						 template="/ru/citeck/components/form/2-column-set.ftl"/>
					<field id="idocs:fullOrganizationName">
						<constraint-handlers>
							<constraint type="ru.citeck.alfresco.acm.constraints.dms.UniqueConstraint" validation-handler="Alfresco.forms.validation.checkunique" event="keyup" message-id="forms.message.uniqueName" />
						</constraint-handlers>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

</alfresco-config>

