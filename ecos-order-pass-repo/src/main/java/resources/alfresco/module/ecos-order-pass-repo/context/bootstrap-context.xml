<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE beans PUBLIC '-//SPRING//DTD BEAN//EN' 'http://www.springframework.org/dtd/spring-beans.dtd'>
<beans>
    <!-- models -->
    <bean id="attorneys.modelBootstrap" parent="dictionaryModelBootstrap" depends-on="idocs.dictionaryBootstrap">
        <property name="models">
            <list>
                <value>alfresco/module/attorneys-repo/model/attorneysModel.xml</value>
            </list>
        </property>
        <property name="labels">
            <list>
                <value>alfresco/module/attorneys-repo/messages/attorneys_model</value>
                <value>alfresco/module/attorneys-repo/messages/errors</value>
            </list>
        </property>
    </bean>

    <bean id="attorneys.import-spaces" abstract="true" class="org.alfresco.repo.module.ImporterModuleComponent" parent="module.baseComponent">
        <property name="moduleId" value="ecos-attorneys-repo"/>
        <property name="importer" ref="spacesBootstrap"/>
    </bean>

    <!-- attorneys site -->
    <bean id="attorneys.siteBootstrap" parent="attorneys.import-spaces">
        <property name="name" value="attorneys-site"/>
        <property name="description" value="Powers of attorney site"/>
        <property name="sinceVersion" value="0.1"/>
        <property name="appliesFromVersion" value="0.1"/>
        <property name="bootstrapView">
            <props>
                <prop key="path">/${spaces.company_home.childname}/${spaces.sites.childname}</prop>
                <prop key="location">alfresco/templates/bootstrap/ru/citeck/common/site.xml</prop>
                <prop key="messages">alfresco/module/attorneys-repo/bootstrap/attorneys-site</prop>
                <prop key="encoding">UTF-8</prop>
            </props>
        </property>
    </bean>

    <bean id="attorneys.documentFolders" parent="attorneys.import-spaces">
        <property name="name" value="document-folders"/>
        <property name="description" value="Document folders"/>
        <property name="sinceVersion" value="0.1"/>
        <property name="appliesFromVersion" value="0.1"/>
        <property name="dependsOn">
            <list>
                <ref bean="attorneys.siteBootstrap"/>
            </list>
        </property>
        <property name="bootstrapView">
            <props>
                <prop key="uuidBinding">UPDATE_EXISTING</prop>
                <prop key="path">/app:company_home/st:sites/cm:attorneys</prop>
                <prop key="location">alfresco/module/attorneys-repo/bootstrap/document-folders.xml</prop>
                <prop key="messages">alfresco/module/attorneys-repo/bootstrap/document-folders</prop>
                <prop key="encoding">UTF-8</prop>
            </props>
        </property>
    </bean>

    <bean id="attorneys.spacesBootstrap" parent="spacesStoreImporter">
        <property name="useExistingStore">
            <value>true</value>
            <!-- set this to false after data will get imported on production -->
        </property>
        <property name="bootstrapViews">
            <list>
                <props>
                    <prop key="uuidBinding">UPDATE_EXISTING</prop>
                    <prop key="path">/</prop>
                    <prop key="location">alfresco/module/attorneys-repo/bootstrap/enumeration-template.xml</prop>
                    <prop key="encoding">UTF-8</prop>
                </props>
            </list>
        </property>
    </bean>

    <!-- TODO (Maxim Strizhov): need to resolve issue of creating workspace://SpacesStore/category-document-type-root from the dependence -->
    <!--<bean id="attorneys.categoryBootstrap" parent="attorneys.import-spaces">-->
    <!--<property name="name" value="attorneys-doctype-categories"/>-->
    <!--<property name="description" value="Attorneys Document Type Categories" />-->
    <!--<property name="sinceVersion" value="0.1" />-->
    <!--<property name="appliesFromVersion" value="0.1" />-->
    <!--<property name="dependsOn">-->
    <!--<list>-->
    <!--<ref bean="idocs.module-component.doctype-categories"/>-->
    <!--</list>-->
    <!--</property>-->
    <!--<property name="bootstrapView">-->
    <!--<props>-->
    <!--<prop key="uuidBinding">UPDATE_EXISTING</prop>-->
    <!--<prop key="path">workspace://SpacesStore/category-document-type-root</prop>-->
    <!--<prop key="location">alfresco/module/attorneys-repo/bootstrap/doctype-categories.xml</prop>-->
    <!--<prop key="messages">alfresco/module/attorneys-repo/bootstrap/doctype-categories</prop>-->
    <!--<prop key="encoding">UTF-8</prop>-->
    <!--</props>-->
    <!--</property>-->
    <!--</bean>-->

    <bean id="attorneys.module-component.doctype-attorneys" parent="attorneys.import-spaces">
        <property name="name" value="doctype-attorney" />
        <property name="description" value="Attorneys Document Type Categories" />
        <property name="sinceVersion" value="0.1" />
        <property name="appliesFromVersion" value="0.1" />
        <property name="dependsOn">
            <list>
                <ref bean="idocs.module-component.doctype-categories" />
            </list>
        </property>
        <property name="bootstrapView">
            <props>
                <prop key="uuidBinding">UPDATE_EXISTING</prop>
                <prop key="path">workspace://SpacesStore/category-document-type-root</prop>
                <prop key="location">alfresco/module/attorneys-repo/bootstrap/doctype-categories.xml</prop>
                <prop key="messages">alfresco/module/attorneys-repo/bootstrap/doctype-categories</prop>
                <prop key="encoding">UTF-8</prop>
            </props>
        </property>
    </bean>

    <bean id="attorneys.module-component.attorneys-journals" parent="attorneys.import-spaces">
        <property name="name" value="attorneys-journals" />
        <property name="description" value="Attorneys Journals" />
        <property name="sinceVersion" value="0.1" />
        <property name="appliesFromVersion" value="0.1" />
        <property name="dependsOn">
            <list>
                <ref bean="idocs.module-component.journals-meta-root" />
                <ref bean="attorneys.documentFolders"/>
            </list>
        </property>
        <property name="bootstrapView">
            <props>
                <prop key="uuidBinding">UPDATE_EXISTING</prop>
                <prop key="path">/cm:IDocsRoot/journal:journalMetaRoot</prop>
                <prop key="location">alfresco/module/attorneys-repo/bootstrap/journals/attorneys-journals.xml</prop>
                <prop key="messages">alfresco/module/attorneys-repo/bootstrap/journals/journals</prop>
                <prop key="encoding">UTF-8</prop>
            </props>
        </property>
    </bean>

    <bean id="attorneys.module-component.journals-lists" parent="attorneys.import-spaces">
        <property name="name" value="attorneys-list-journals"/>
        <property name="description" value="Attorneys List Journals"/>
        <property name="sinceVersion" value="0.0.1"/>
        <property name="appliesFromVersion" value="0.0.1"/>
        <property name="dependsOn">
            <list>
                <ref bean="attorneys.module-component.attorneys-journals"/>
            </list>
        </property>
        <property name="bootstrapViews">
            <list>
                <props>
                    <prop key="uuidBinding">UPDATE_EXISTING</prop>
                    <prop key="path">/cm:IDocsRoot/journal:journalMetaRoot/cm:journalLists</prop>
                    <prop key="location">alfresco/module/attorneys-repo/bootstrap/journals/journals-list.xml</prop>
                    <prop key="messages">alfresco/module/attorneys-repo/bootstrap/journals/journal-list</prop>
                    <prop key="encoding">UTF-8</prop>
                </props>
            </list>
        </property>
    </bean>
    
    <bean id="attorneys.groupsBootstrap" parent="attorneys.import-spaces">
        <property name="name" value="attorneys-groups"/>
        <property name="description" value="Attorneys groups"/>
        <property name="sinceVersion" value="0.1"/>
        <property name="appliesFromVersion" value="0.1"/>
        <property name="bootstrapViews">
        	<list>
	            <props>
	                <prop key="path">/</prop>
	                <prop key="location">alfresco/templates/bootstrap/ru/citeck/common/group.xml</prop>
	                <prop key="messages">alfresco/module/attorneys-repo/bootstrap/groups/canRequestOtherAttorneys</prop>
	                <prop key="encoding">UTF-8</prop>
	            </props>
	            <props>
	                <prop key="path">/</prop>
	                <prop key="location">alfresco/templates/bootstrap/ru/citeck/common/group.xml</prop>
	                <prop key="messages">alfresco/module/attorneys-repo/bootstrap/groups/canApproveAttorneys</prop>
	                <prop key="encoding">UTF-8</prop>
	            </props>
        	</list>
        </property>
    </bean>

    <bean parent="idocs.import-lifecycle.csv">
        <property name="location"
                  value="alfresco/module/attorneys-repo/lifecycle/attorneyForm-lifecycle.csv"/>
        <property name="entityType" value="att:attorneyForm"/>
    </bean>

    
</beans>